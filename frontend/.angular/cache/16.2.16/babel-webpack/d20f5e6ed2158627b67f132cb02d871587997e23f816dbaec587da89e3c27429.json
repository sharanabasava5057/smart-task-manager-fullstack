{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/reports.service\";\nimport * as i2 from \"../core/auth.service\";\nfunction ReportsComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \" You do not have permission to access reports.\\n\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReportsComponent_div_3_p_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Generating report...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReportsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"h3\");\n    i0.ɵɵtext(3, \"Task Report by Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\");\n    i0.ɵɵtext(5, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"select\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function ReportsComponent_div_3_Template_select_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.status = $event);\n    });\n    i0.ɵɵelementStart(7, \"option\", 3);\n    i0.ɵɵtext(8, \"TODO\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 4);\n    i0.ɵɵtext(10, \"IN_PROGRESS\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 5);\n    i0.ɵɵtext(12, \"COMPLETED\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 6);\n    i0.ɵɵtext(14, \"BLOCKED\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 7)(16, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ReportsComponent_div_3_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.downloadStatusPdf());\n    });\n    i0.ɵɵtext(17, \" PDF \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ReportsComponent_div_3_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.downloadStatusExcel());\n    });\n    i0.ɵɵtext(19, \" Excel \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 1)(21, \"h3\");\n    i0.ɵɵtext(22, \"Task Report by Date Range\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 9)(24, \"label\");\n    i0.ɵɵtext(25, \"Start Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function ReportsComponent_div_3_Template_input_ngModelChange_26_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.startDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 9)(28, \"label\");\n    i0.ɵɵtext(29, \"End Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function ReportsComponent_div_3_Template_input_ngModelChange_30_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.endDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"div\", 7)(32, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ReportsComponent_div_3_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.downloadRangePdf());\n    });\n    i0.ɵɵtext(33, \" PDF \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ReportsComponent_div_3_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.downloadRangeExcel());\n    });\n    i0.ɵɵtext(35, \" Excel \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(36, ReportsComponent_div_3_p_36_Template, 2, 0, \"p\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.status);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.downloading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.downloading);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.startDate);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.endDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.downloading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.downloading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.downloading);\n  }\n}\nexport let ReportsComponent = /*#__PURE__*/(() => {\n  class ReportsComponent {\n    constructor(reportsService, authService) {\n      this.reportsService = reportsService;\n      this.authService = authService;\n      this.status = 'COMPLETED';\n      this.startDate = '';\n      this.endDate = '';\n      this.downloading = false;\n    }\n    triggerDownload(blob, filename) {\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = filename;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n    downloadStatusPdf() {\n      this.downloading = true;\n      this.reportsService.downloadTasksByStatusPdf(this.status).subscribe({\n        next: blob => {\n          this.triggerDownload(blob, `tasks-${this.status}.pdf`);\n          this.downloading = false;\n        },\n        error: () => this.downloading = false\n      });\n    }\n    downloadStatusExcel() {\n      this.downloading = true;\n      this.reportsService.downloadTasksByStatusExcel(this.status).subscribe({\n        next: blob => {\n          this.triggerDownload(blob, `tasks-${this.status}.xlsx`);\n          this.downloading = false;\n        },\n        error: () => this.downloading = false\n      });\n    }\n    downloadRangePdf() {\n      if (!this.startDate || !this.endDate) return;\n      this.downloading = true;\n      this.reportsService.downloadTasksByRangePdf(this.startDate, this.endDate).subscribe({\n        next: blob => {\n          this.triggerDownload(blob, `tasks-${this.startDate}_to_${this.endDate}.pdf`);\n          this.downloading = false;\n        },\n        error: () => this.downloading = false\n      });\n    }\n    downloadRangeExcel() {\n      if (!this.startDate || !this.endDate) return;\n      this.downloading = true;\n      this.reportsService.downloadTasksByRangeExcel(this.startDate, this.endDate).subscribe({\n        next: blob => {\n          this.triggerDownload(blob, `tasks-${this.startDate}_to_${this.endDate}.xlsx`);\n          this.downloading = false;\n        },\n        error: () => this.downloading = false\n      });\n    }\n    static {\n      this.ɵfac = function ReportsComponent_Factory(t) {\n        return new (t || ReportsComponent)(i0.ɵɵdirectiveInject(i1.ReportsService), i0.ɵɵdirectiveInject(i2.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ReportsComponent,\n        selectors: [[\"app-reports\"]],\n        decls: 4,\n        vars: 2,\n        consts: [[4, \"ngIf\"], [1, \"card\", \"report-card\"], [3, \"ngModel\", \"ngModelChange\"], [\"value\", \"TODO\"], [\"value\", \"IN_PROGRESS\"], [\"value\", \"COMPLETED\"], [\"value\", \"BLOCKED\"], [1, \"btn-row\"], [1, \"button-primary\", 3, \"disabled\", \"click\"], [1, \"form-field\"], [\"type\", \"date\", 3, \"ngModel\", \"ngModelChange\"]],\n        template: function ReportsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\");\n            i0.ɵɵtext(1, \"Reports\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(2, ReportsComponent_p_2_Template, 2, 0, \"p\", 0);\n            i0.ɵɵtemplate(3, ReportsComponent_div_3_Template, 37, 8, \"div\", 0);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", !ctx.authService.isAdmin() && !ctx.authService.isManager());\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.authService.isAdmin() || ctx.authService.isManager());\n          }\n        },\n        styles: [\".report-card[_ngcontent-%COMP%]{max-width:480px;margin-bottom:1.5rem}.report-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.btn-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}\"]\n      });\n    }\n  }\n  return ReportsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}